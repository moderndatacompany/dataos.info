---
title: "Scanner for Pulsar"
---

DataOS provides the capability to create a Depot of type 'FASTBASE' for reading topics and messages stored in Apache Pulsar. This Depot allows user to access published topics and process incoming streams of messages effectively. Additionally, user can scan metadata from a FASTBASE-type Depot using Scanner Workflows, enabling further analysis and processing of the data.

## **Requirements**

Following are the Requirements:

- Ensure that the depot is created and have¬†`read`¬†access for the Depot using the Metis UI or the CLI:
    
    ```bash
        dataos-ctl get -t depot -a
    ```

    ```bash
    #expected output
    
    INFO[0000] üîç get...                                     
    INFO[0000] üîç get...complete                             
    
                NAME            | VERSION | TYPE  | WORKSPACE | STATUS |   RUNTIME   |         OWNER          
    ----------------------------|---------|-------|-----------|--------|-------------|------------------------
      mongodepot                | v2alpha | depot |           | active |             | Jhon Doe
      snowflakedepot            | v2alpha | depot |           | active |             | JOJO
      redshiftdepot             | v2alpha | depot |           | active |             | Kira
      mysqldepot                | v2alpha | depot |           | active |             | Ryuk
      oracle01                  | v2alpha | depot |           | active |             | drdoom
      mariadb01                 | v2alpha | depot |           | active |             | tonystark
      demopreppostgres          | v2alpha | depot |           | active |             | slimshaddy
      demoprepbq                | v2alpha | depot |           | active |             | pengvin
      mssql01                   | v2alpha | depot |           | active |             | hulk
      kafka01                   | v2alpha | depot |           | active |             | peeter
      icebase                   | v2alpha | depot |           | active |             | blackpink
      azuresql                  | v2alpha | depot |           | active |             | arnold
      **fastbase                  | v2alpha | depot |           | active |             | ddevil**
    ```
    
    If the Depot for the Fastbase/Pulsar is not created, create it by capitalizing the following sample manifest file: 
    
    ```yaml
    name: ${{depot-name}}
    version: v1
    type: depot
    tags:
      - ${{tag1}}
      - ${{tag2}}
    owner: ${{owner-name}}
    layer: user
    depot:
      type: PULSAR       
      description: ${{description}}
      external: ${{true}}
      spec:              
        adminUrl: ${{admin-url}}
        serviceUrl: ${{service-url}}
        tenant: ${{system}}
    # Ensure to obtain the correct tenant name and other specifications from your organization.
    ```
    
- **Access Permission to Run a Scanner Workflow**
    Verify that the use case or role tag for executing a Scanner Workflow is approved, which are as follows:
    
    | **Access using Role Tag** | **Access using Use cases** |
    | --- | --- |
    | `roles:id:data-dev`  | Read Workspace  |
    | `roles:id:system-dev`  | Run as Scanner User  |
    | `roles:id:user`  | Manage All Depot  |
    |   | Read All Dataset  |
    |   | Read all secrets from Heimdall  |

    

## **Scanner Workflow**

Following is the manifest file for scanning metadata from Fastbase/pulsar:

    ```yaml
    version: v1
    name: fastbase-scanner2
    type: workflow
    tags:
      - fastbase-scanner2.0
    description: The job scans schema tables and register metadata
    workflow:
      dag:
        - name: scanner2-fastbase
          description: The job scans schema from fastbase depot tables and register metadata to metis2
          spec:
            stack: scanner:2.0
            compute: runnable-default
            runAsUser: metis
            stackSpec:
              depot: fastbase
    ```



The above sample manifest file is deployed using the following command:

```
dataos-ctl resource apply -f {path to the Scanner YAML}
```
After the successful workflow run, user can check the metadata of scanned Tables on Metis UI for all schemas present in the database.

<Note>
  If the Depot or Scanner configurations are updated, the Scanner must be redeployed after deleting the previous instance. Use the following command to delete the existing Scanner:

  ```
  dataos-ctl resource delete -f {path to the Scanner YAML file}
  ```
</Note>