---
title: "Scanner for Oracle"
---
The prerequisites and the essential manifest configuration of scanning metadata from the Oracle are as follows: 

## Prerequisites

- Credentials to connect to Oracle database.
- To extract metadata, the MySQL user needs to have access to the¬†`INFORMATION_SCHEMA`.
- Metadata Scan is supported for 12c, 18c, 19c, and 21c versions.
- To ingest metadata from oracle user must have¬†`CREATE SESSION`¬†privilege for the user.
- Check the Oracle Depot is existed or not, for this go to the Metis UI of the DataOS or use the following command:

```bash
dataos-ctl get -t depot -a
```

```bash
#expected output

INFO[0000] üîç get...                                     
INFO[0000] üîç get...complete                             

            NAME            | VERSION | TYPE  | WORKSPACE | STATUS |   RUNTIME   |         OWNER          
----------------------------|---------|-------|-----------|--------|-------------|------------------------
  mongodepot                | v2alpha | depot |           | active |             | Jhon Doe
  snowflakedepot            | v2alpha | depot |           | active |             | JOJO
  redshiftdepot             | v2alpha | depot |           | active |             | Kira
  mysqldepot                | v2alpha | depot |           | active |             | Ryuk
  oracle01                  | v2alpha | depot |           | active |             | drdoom
  mariadb01                 | v2alpha | depot |           | active |             | tonystark
  mssql01                   | v2alpha | depot |           | active |             | hulk

```

If the Depot is not created, create a Depot using the template given below: 

```yaml
name: ${{depot-name}}
version: v1
type: depot
tags:
  - ${{dropzone}}
  - ${{oracle}}
layer: user
depot:
  type: ORACLE                                    
  description: ${{"Oracle Sample data"}}
  spec:
    subprotocol: ${{subprotocol}} # for example "oracle:thin"                                     
    host: ${{host}}
    port: ${{port}}
    service: ${{service}}
  external: ${{true}}
    - acl: r
      type: key-value-properties
      data:
        username: ${{username}}
        password: ${{password}}  
    - acl: rw
      type: key-value-properties
      data:
        username: ${{username}}
        password: ${{password}}
```

- **Access Permission to Run a Scanner Workflow**
    Verify that the use case or role tag for executing a Scanner Workflow is approved, which are as follows:
    
    | **Access using Role Tag** | **Access using Use cases** |
    | --- | --- |
    | `roles:id:data-dev`  | Read Workspace  |
    | `roles:id:system-dev`  | Run as Scanner User  |
    | `roles:id:user`  | Manage All Depot  |
    |   | Read All Dataset  |
    |   | Read all secrets from Heimdall  |   


## **Scanner Workflow**

An Oracle-type Depot enables access to all schemas visible to the specified user in the configured database.

<Info>

Ensure that the Depot is created for your Oracle database and you have `Read` access for the depot.

</Info>

```yaml
version: v1
name: oracle-scanner
type: workflow
tags:
  - oracle-scanner
description: The job scans schema tables and register metadata
workflow:
  dag:
    - name: oracle-scanner
      description: The job scans schema from oracle-scanner tables and register metadata to metis2
      spec:
        tags:
          - scanner
        stack: scanner:2.0
        compute: runnable-default
                runAsUser: metis
        stackSpec:
          depot: oracle01          #depo name/address
          sourceConfig:
            config:
              markDeletedTables: false
              includeTables: true
              includeViews: true
              databaseFilterPattern:
                  includes:
                      - database1
                      - database2
                    excludes:
                      - database3
                      - database4
                  schemaFilterPattern:
                    includes:
                      - schema1
                      - schema2
                    excludes:
                      - schema3
                      - schema4
                  tableFilterPattern:
                    includes:
                      - table1
                      - table2
                    excludes:
                      - table3
                      - table4
```

After the successful workflow run, user can check the metadata of scanned Tables on Metis UI for all schemas present in the database. The above sample manifest file is deployed using the following command:

```
dataos-ctl resource apply -f {path to the Scanner YAML}
```

<Note>
  If the Depot or Scanner configurations are updated, the Scanner must be redeployed after deleting the previous instance. Use the following command to delete the existing Scanner:

  ```
  dataos-ctl resource delete -f {path to the Scanner YAML file}
  ```
</Note>