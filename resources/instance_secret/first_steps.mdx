---
title: "First Steps"
---

## Create an Instance Secret

To create an Instance Secret Resource in DataOS, ensure you have access to theÂ [DataOS Command Line Interface (CLI)](https://dataos.info/interfaces/cli/)Â and the required permissions. Then, follow the provided steps to complete the creation process efficiently and securely.

**Create a manifest file**

Begin by creating a manifest file that will hold the configuration details for your Instance Secret. A sample manifest is provided below:

<Accordion title="Sample Instance Secret manifest" defaultOpen={false}>
  ```yaml
  # Resource meta section
  name: depotsecret-r # Resource name (mandatory)
  version: v1 # Manifest version (mandatory)
  type: instance-secret # Resource-type (mandatory)
  tags: # Tags (optional)
  - just for practice
  description: instance secret configuration # Description of Resource (optional)
  layer: user

  # Instance Secret-specific section
  instance-secret: # Instance Secret mapping (mandatory)
    type: key-value-properties # Type of Instance-secret (mandatory)
    acl: r # Access control list (mandatory)
    data: # Data section mapping (mandatory)
      username: iamgroot
      password: yourpassword
  ```
</Accordion>

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-1)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-2)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-3)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-4)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-5)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-6)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-7)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-8)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-9)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-10)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-11)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-12)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-13)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-14)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-15)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-0-16)

#### **Resource meta section**

The Instance Secret manifest comprises a Resource meta section that outlines essential metadata attributes applicable to all Resource types. Note that within this section some attributes are optional, while others are mandatory.

```yaml
# Resource meta section
name: ${depotsecret-r} # Resource name (mandatory)
version: v1 # Manifest version (mandatory)
type: instance-secret # Resource-type (mandatory)
tags: 
  - ${new instance secret} # Tags (optional)
  - ${resource}
description: ${resource description} # Description (optional)
owner: ${iamgroot} # Owner's DataOS UserID (optional)
layer: ${user} # Layer (optional)
instance-secret: # Instance-secret specific section
```

For more information about the various attributes in the Resource meta section, refer to theÂ [Attributes of Resource meta section](https://dataos.info/resources/manifest_attributes/).

#### **Instance Secret specific section**

This section focuses on Instance Secret attributes, outlining details such as Instance SecretÂ `type`,Â `acl`(access control list), sensitiveÂ `data`Â to be stored. Additionally, it allows for the optional inclusion of file paths of sensitive information to be stored using theÂ `files`Â attribute.

```yaml
instance-secret: # Instance-secret specific section
  type: ${{key-value-properties}} # Type of Instance-secret (mandatory)
  acl: ${{r|rw}} # Access control list (mandatory)
  data: # Data section mapping (either files or data is required)
    ${{username: iamgroot}}
    ${{password: abcd1234}}
  files: # Manifest file path (either files or data is required)
    ${{xyz: /home/instance-secret.yaml}}
```

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-2-1)

The table below summarizes the attributes of the Instance-secret specific section:

| Attribute         | Data Type | Default Value | Possible Value                                              | Requirement |
| ----------------- | --------- | ------------- | ----------------------------------------------------------- | ----------- |
| `instance-secret` | mapping   | none          | none                                                        | mandatory   |
| `type`            | string    | none          | cloud-kernel, key-value, key-value-properties, certificates | mandatory   |
| `acl`             | string    | none          | r, rw                                                       | mandatory   |
| `data`            | mapping   | none          | none                                                        | mandatory   |
| `files`           | string    | none          | file-path                                                   | optional    |

For more information about the various attributes in the Instance Secret specific section, refer to theÂ [Attributes of Instance Secret specific section](https://dataos.info/resources/instance_secret/configurations/).

### **Apply the manifest**

To create an Instance Secret Resource instance  within the DataOS, use the`apply`command. When applying the manifest file from the DataOS CLI, make sure you don't specify Workspace as Instance Secrets areÂ [Instance-level Resources](https://dataos.info/resources/). The`apply`command as follows:

<CodeGroup>
  ```powershell Command
  dataos-ctl resource apply -f ${path/instance_secret.yaml}
  ```

  ```
  dataos-ctl resource apply -f depot_secret.yaml
  ```

  ```
  dataos-ctl resource apply -f depot_secret.yaml
  ```
</CodeGroup>

**Alternative command:**

<CodeGroup>
  ```powershell Command
  dataos-ctl apply -f ${path/instance_secret.yaml}
  ```

  ```powershell Example Usage
  dataos-ctl apply -f depot_secret.yaml
  ```
</CodeGroup>

### **Manage an Instance-Secret**

#### **Validate the Instance Secret**instance secret

To validate the proper creation of the Instance Secret Resource within the DataOS environment, employ theÂ `get`Â command. Execute the following commands to ascertain the existence of the Instance Secret Resource.

* To get the details of the instance secret created by the user who applies the Instance-secret, use the following command:

<CodeGroup>
  ```bash Command
  dataos-ctl resource get -t instance-secret
  ```

  ```bash Alternative command
  dataos-ctl get -t instance-secret
  ```
</CodeGroup>

* To get the details of instance-secret created by all the users within the DataOS Instance, use the above command withÂ `-a`Â flag:

<CodeGroup>
  ```bash Command
  dataos-ctl resource get -t instance-secret -a
  ```

  ```
  dataos-ctl get -t instance-secret -a
  ```

  ```
  console.log("Hello World");
  ```
</CodeGroup>

#### **Deleting an Instance Secret**

<Warning>
  Before you can delete an Instance Secret, you need to make sure there are no other Resources dependent on it. For example, if a Depot has a dependency on an Instance Secret, trying to delete that Instance Secret will cause an error. So, you'll need to remove the Depot first, and then you can delete the Instance Secret. This rule applies to not just Depot, but all dependent Resources, such as Workflow, Service, Worker, etc. The following error will be thrown if any Resource has a dependency on Instance Secret as shown below.&#x20;

  ```bash
  dataos-ctl delete -t instance-secret -n sampleinstsecret
  INFO[0000] ðŸ—‘ delete...                                  
  INFO[0000] ðŸ—‘ deleting sampleinstsecret:v1:instance-secret... 
  INFO[0001] ðŸ—‘ deleting sampleinstsecret:v1:instance-secret...error 
  WARN[0001] ðŸ—‘ delete...error                             
  ERRO[0001] Invalid Parameter - failure deleting instance resource : cannot delete resource, it is a dependency of 'depot:v2alpha:sampleinstdepot'
  ```
</Warning>

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-15-1)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-15-2)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-15-3)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-15-4)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-15-5)[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-15-6)

To remove the Instance Secret Resource from the DataOS environment, utilize theÂ `delete`Â command. Execute the following commands to initiate the deletion process:

**Method 1:**Â  Specify the Workspace, Resource-type, and Instance Secret name in theÂ [`delete`](https://dataos.info/interfaces/cli/command_reference/#delete)Â command.

[Command](https://dataos.info/resources/instance_secret/first_steps/#command_2)[Example Usage](https://dataos.info/resources/instance_secret/first_steps/#example-usage_2)

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-16-1)`dataos-ctl resource delete -t ${resource-type} -n ${resource-name}`

Alternative command

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-17-1)`dataos-ctl delete -t ${resource-type} -n ${resource-name}`

Output

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-20-1)`dataos-ctl delete -t instance-secret -n `sampleinstsecret
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-20-2)`INFO[0000] ðŸ—‘ delete...                                  `
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-20-3)`INFO[0000] ðŸ—‘ deleting `sampleinstsecret:instance-secret...deleted
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-20-4)`INFO[0000] ðŸ—‘ `delete...complete

**Method 2:**Â Copy the Instance Secret name, version, and Resource-type from the output of theÂ [`get`](https://dataos.info/interfaces/cli/command_reference/#get)Â command seperated by '|' enclosed within quotes and use it as a string in the delete command.

[Command](https://dataos.info/resources/instance_secret/first_steps/#command_3)[Example Usage](https://dataos.info/resources/instance_secret/first_steps/#example-usage_3)

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-21-1)`dataos-ctl resource delete -i ${resource-name:version:resource-type}`

Alternative command

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-22-1)`dataos-ctl resource delete -i ${resource-name:version:resource-type}`

Output

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-24-1)`dataos-ctl delete -t instance-secret -n `sampleinstsecret
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-24-2)`INFO[0000] ðŸ—‘ delete...                                  `
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-24-3)`INFO[0000] ðŸ—‘ deleting `sampleinstsecret:instance-secret...deleted
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-24-4)`INFO[0000] ðŸ—‘ `delete...complete

**Method 3:**Â Specify the path of the YAML file and use theÂ [`delete`](https://dataos.info/interfaces/cli/command_reference/#delete)Â command.

[Command](https://dataos.info/resources/instance_secret/first_steps/#command_4)[Example](https://dataos.info/resources/instance_secret/first_steps/#example)

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-25-1)`dataos-ctl delete -f ${manifest-file-path}`

Output

[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-27-1)`dataos-ctl delete -t instance-secret -n `sampleinstsecret
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-27-2)`INFO[0000] ðŸ—‘ delete...                                  `
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-27-3)`INFO[0000] ðŸ—‘ deleting `sampleinstsecret:instance-secret...deleted
[](https://dataos.info/resources/instance_secret/first_steps/#__codelineno-27-4)`INFO[0000] ðŸ—‘ `delete...complete